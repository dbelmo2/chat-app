{"version":3,"sources":["services/firebase.js","helpers/auth.js","components/Form.js","components/pages/SignUpPage/SignUp.js","components/pages/LoginPage/LogIn.js","components/pages/HomePage/Home.js","components/pages/ChatPage/Chat.js","components/pages/CallMenuPage/CallMenu.js","context/socket.js","components/pages/JoinCallPage/JoinCall.js","components/pages/VideoCallPage/VideoCall.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","database","signup","email","password","createUserWithEmailAndPassword","signin","signInWithEmailAndPassword","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","signInWithGitHub","GithubAuthProvider","signOut","Form","isSignUp","useState","error","setError","errorMessage","setErrorMessage","a","e","preventDefault","emailInput","document","getElementById","passwordInput","console","log","value","screenNameInput","ref","child","currentUser","uid","set","className","onSubmit","id","name","type","placeholder","height","onClick","to","SignUp","LogIn","Home","class","Chat","user","chats","setChats","setReadError","userName","setUserName","setWriteError","scrollBottom","scrollBox","scrollTop","scrollHeight","content","push","timestamp","Date","now","sender","message","useEffect","once","then","snapshot","val","on","forEach","snap","setTimeout","style","alignSelf","marginLeft","marginTop","size","map","item","index","display","justifyContent","marginRight","CallMenu","color","socket","socketio","connect","SocketContext","React","createContext","JoinCall","useContext","sessFound","setSessFound","inputEl","emit","VideoCall","PeerType","useParams","isHost","stream","participants","setParticipants","undefined","setStream","peer","setPeer","sessKey","setSessKey","mute","setMute","cameraOff","setCameraOff","callEnded","setCallEnded","gotMedia","thisPeer","Peer","initiator","trickle","data","srcObject","signal","navigator","mediaDevices","getUserMedia","video","audio","catch","participant","muted","autoPlay","src","getAudioTracks","enabled","destroy","getVideoTracks","PrivateRoute","Component","component","authenticated","rest","render","props","pathname","state","from","location","PublicRoute","App","setAuthenticated","setLoading","onAuthStateChanged","Provider","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"8VAYEA,IAASC,cAVY,CACnBC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAIV,IAAMC,EAAOT,IAASS,KAChBC,EAAKV,IAASW,WCXtB,SAASC,EAAOC,EAAOC,GAC1B,OAAOL,IAAOM,+BAA+BF,EAAOC,GAGjD,SAASE,EAAOH,EAAOC,GAC1B,OAAOL,IAAOQ,2BAA2BJ,EAAOC,GAG7C,SAASI,IACZ,IAAMC,EAAW,IAAIV,EAAKW,mBAC1B,OAAOX,IAAOY,gBAAgBF,GAG3B,SAASG,IACZ,IAAMH,EAAW,IAAIV,EAAKc,mBAC1B,OAAOd,IAAOY,gBAAgBF,GAG3B,SAASK,IACZ,OAAOf,IAAOe,U,WC4GHC,MA1Hf,YAA2B,IAAZC,EAAW,EAAXA,SAGX,EAA0BC,oBAAS,GAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAwCF,mBAAS,IAAjD,mBAAOG,EAAP,KAAqBC,EAArB,KAJsB,4CAOtB,sBAAAC,EAAA,+EAEYd,IAFZ,sDAIMW,GAAS,GACTE,EAAgB,yBALtB,yDAPsB,kEAetB,sBAAAC,EAAA,+EAEYV,IAFZ,sDAIMO,GAAS,GACTE,EAAgB,yBALtB,yDAfsB,kEAyBtB,WAA2BE,GAA3B,mBAAAD,EAAA,yDACIC,EAAEC,iBACEC,EAAaC,SAASC,eAAe,eACrCC,EAAgBF,SAASC,eAAe,kBAE5CE,QAAQC,IAAI,UAAYL,EAAWM,OACnCF,QAAQC,IAAI,aAAeF,EAAcG,QAEzB,IAAbf,EARP,wBASYgB,EAAkBN,SAASC,eAAe,qBAC1CR,GAAS,GAVrB,mBAYsBjB,EAAOuB,EAAWM,MAAOH,EAAcG,OAZ7D,yBAasB/B,EAAGiC,IAAI,SAASC,MAAMnC,IAAOoC,YAAYC,KAAKC,IAAIL,EAAgBD,OAbxF,0DAgBgBF,QAAQC,IAAR,MACAT,EAAgB,kBAjBhC,2DAwBkBf,EAAOmB,EAAWM,MAAOH,EAAcG,OAxBzD,2DA0BYZ,GAAS,GACTE,EAAgB,gBA3B5B,mEAzBsB,sBA6DtB,OACI,qBAAKiB,UAAU,kBAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,sBAAKA,UAAU,aAAf,UAGI,qBAAKA,UAAU,uBAAf,SACI,oBAAIA,UAAU,eAAd,0BAEHpB,EACG,mCACI,mBAAGoB,UAAU,cAAb,SAA4BlB,MAEhC,KACJ,uBAAMkB,UAAU,cAAcC,SA3ExB,4CA2EN,UACI,uBACAC,GAAG,cACHF,UAAU,qBACVG,KAAK,QACLC,KAAK,QACLC,YAAY,UAEZ,uBACAH,GAAG,iBACHI,OAAO,OACPN,UAAWtB,EAAW,qBAAuB,wBAC7CyB,KAAK,WACLC,KAAK,WACLC,YAAY,aAEX3B,EACG,uBACIwB,GAAG,oBACHI,OAAO,OACPN,UAAU,qBACVG,KAAK,OACLC,KAAK,OACLC,YAAY,cAGhB,KAGJ,wBAAQL,UAAU,SAASI,KAAK,SAAhC,SAA0C1B,EAAW,UAAY,iBAKzE,sBAAKsB,UAAU,uBAAf,UACI,wBAAQO,QA9GF,2CA8GyBP,UAAU,YAAzC,SAAuDtB,EAAW,sBAAwB,uBAC1F,wBAAQ6B,QA/GF,2CA+GyBP,UAAU,YAAzC,SAAuDtB,EAAW,sBAAwB,0BAE9F,sBAAKsB,UAAU,4BAAf,UACI,oBAAGA,UAAU,oBAAb,cAAmCtB,EAAW,2BAA6B,yBAA3E,OACA,eAAC,IAAD,CAAMsB,UAAU,yBAAyBQ,GAAI9B,EAAW,SAAW,UAAnE,cAAgFA,EAAW,SAAW,UAAtG,gBC5GL+B,MAXf,WAGI,OACI,mCACI,cAAC,EAAD,CAAM/B,UAAU,OCEbgC,MARf,WACI,OACI,mCACI,cAAC,EAAD,CAAMhC,UAAU,O,MCqBbiC,MAtBf,WACI,OACI,qBAAKX,UAAU,kBAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,qBAAKA,UAAU,kBAAf,SACI,oBAAIA,UAAU,gBAAd,4BAEJ,sBAAKA,UAAU,mBAAf,UACI,cAAC,IAAD,CAAMQ,GAAG,SAAT,SACI,wBAAQI,MAAM,SAAd,wBAEJ,cAAC,IAAD,CAAMJ,GAAG,UAAT,SACI,wBAAQI,MAAM,SAAd,kC,gBC6HTC,MApIf,WAYI,MAAwBlC,mBAASlB,IAAOoC,aAAxC,mBAAOiB,EAAP,KACA,GADA,KAC0BnC,mBAAS,KAAnC,mBAAOoC,EAAP,KAAcC,EAAd,KACA,EAAkCrC,mBAAS,MAA3C,mBAAkBsC,GAAlB,WACA,EAAgCtC,mBAASmC,EAAKjD,OAA9C,mBAAOqD,EAAP,KAAiBC,EAAjB,KACA,EAAoCxC,mBAAS,MAA7C,mBAAmByC,GAAnB,WAIMC,EAAe,WACjB,IAAIC,EAAYlC,SAASC,eAAe,aACxCiC,EAAUC,UAAYD,EAAUE,cAtBxB,4CA0BZ,WAA4BvC,GAA5B,eAAAD,EAAA,yDACIC,EAAEC,iBAEa,MADXuC,EAAUrC,SAASC,eAAe,iBAAiBI,OAF3D,wDAII2B,EAAc,MAJlB,kBAMc1D,EAAGiC,IAAI,SAAS+B,KAAK,CACzBD,QAASA,EACTE,UAAWC,KAAKC,MAChBC,OAAQZ,IATlB,OAWQ9B,SAASC,eAAe,iBAAiBI,MAAM,GAXvD,kDAaQ2B,EAAc,KAAMW,SAb5B,2DA1BY,sBAoFZ,OAvCAC,qBAAU,WACNf,EAAa,MACb,IAEIvD,EAAGiC,IAAI,UAAYmB,EAAKhB,KAAKmC,KAAK,SAASC,MAAK,SAACC,GAExB,MAAlBA,EAASC,OAGRjB,EAAYgB,EAASC,OAEzB7C,QAAQC,IAAI,oBAAsB0B,MAQtCxD,EAAGiC,IAAI,SAAS0C,GAAG,SAAS,SAAAF,GACxB,IAAIpB,EAAQ,GACZoB,EAASG,SAAQ,SAACC,GACdxB,EAAMW,KAAKa,EAAKH,UAEpBpB,EAAS,GAAD,OAAKD,IAGbyB,WAAWnB,EAAc,QAMjC,MAAMzC,GACFW,QAAQC,IAAIZ,GACZqC,EAAarC,EAAMmD,YAEtB,CAACjB,EAAKZ,GAAIgB,IAGX,sBAAKlB,UAAU,kBAAf,UACI,sBAAKA,UAAU,eAAf,UACI,oBAAIA,UAAU,eAAd,wBACA,yBAAQO,QAAS/B,EAASiE,MAAO,CAACC,UAAU,WAAYC,WAAY,EAAGC,UAAW,GAAI5C,UAAU,iBAAhG,cAAkH,cAAC,IAAD,CAAc6C,KAAM,WAE1I,qBAAK3C,GAAG,YAAYF,UAAU,gBAA9B,SACKe,EAAM+B,KAAI,SAACC,EAAMC,GAEd,OADAzD,QAAQC,IAAI,WAAauD,EAAKjB,OAAS,aAAeiB,EAAKtB,SAGvD,sBAAKgB,MAAO,CAACC,UAAWK,EAAKjB,SAAWZ,EAAW,WAAa,cAAelB,UAAU,wBAAzF,UAEI,qBAAKyC,MAAO,CAACQ,QAAS,OAAQC,eAAgBH,EAAKjB,SAAWZ,EAAY,WAAW,cAArF,SACI,oBAAGuB,MAAO,CAACE,WAAYI,EAAKjB,SAAWZ,EAAW,EAAI,EAAGiC,YAAaJ,EAAKjB,SAAWZ,EAAU,EAAE,GAAKlB,UAAU,oBAAjH,cAAuI+C,EAAKjB,OAA5I,SAEJ,qBAAKW,MAAO,CAACS,eAAgBH,EAAKjB,SAAWZ,EAAW,WAAW,cAAelB,UAAU,uBAA5F,SACI,mBAAGA,UAAU,gBAAb,SAAmD+C,EAAKtB,SAAtBsB,EAAKpB,qBAW3D,qBAAK3B,UAAU,sBAAf,SACI,uBAAMC,SAjHN,4CAiHA,UACI,uBACAC,GAAG,gBACHF,UAAU,sBACVG,KAAK,UACLC,KAAK,UACLC,YAAY,OAGZ,wBAAQL,UAAU,qBAAlB,SACI,cAAC,IAAD,CAAc6C,KAAM,GAAIJ,MAAO,CAACU,YAAY,gB,wBCnGrDC,MAtBf,WAMI,OACI,qBAAKpD,UAAU,qBAAf,SACI,sBAAKA,UAAU,mBAAf,UACI,sBAAKA,UAAU,2BAAf,UACI,eAAC,IAAD,CAAMQ,GAAG,kBAAkBR,UAAU,kBAArC,cAAwD,cAAC,IAAD,CAASqD,MAAM,QAAQR,KAAM,KAArF,OACA,uBAAO7C,UAAU,yBAAjB,4BAEJ,sBAAKA,UAAU,2BAAf,UACI,eAAC,IAAD,CAAMQ,GAAG,YAAYR,UAAU,kBAA/B,cAAkD,cAAC,IAAD,CAAeqD,MAAM,QAAQR,KAAM,KAArF,OACA,uBAAO7C,UAAU,yBAAjB,kC,iBCxBPsD,E,OAASC,EAASC,QAAQ,8BAC1BC,EAAgBC,IAAMC,gBCmDpBC,MAlDf,WACI,IAAMN,EAASO,qBAAWJ,GAQ1B,EAAkC9E,oBAAS,GAA3C,mBAAOmF,EAAP,KAAkBC,EAAlB,KAWA,OATA/B,qBAAU,WACNsB,EAAOjB,GAAG,oBAAoB,WAC1B9C,QAAQC,IAAI,gCAEhB8D,EAAOjB,GAAG,iBAAiB,WACvB0B,GAAa,QAElB,IAEAD,GACCvE,QAAQC,IAAI,gDACL,cAAC,IAAD,CAAUgB,GAAG,sBAKpB,qBAAKR,UAAU,qBAAf,SACI,qBAAKA,UAAU,mBAAf,SACI,sBAAKA,UAAU,yBAAf,UACA,oBAAIA,UAAU,kBAAd,8BAEI,uBAAMA,UAAU,gBAAgBC,SA9B7B,SAAChB,GAChBA,EAAEC,iBACF,IAAI8E,EAAU5E,SAASC,eAAe,aACtCiE,EAAOW,KAAK,iBAAkBD,EAAQvE,OACtCuE,EAAQvE,MAAQ,IA0BJ,UACI,uBACIS,GAAG,YACHF,UAAU,iBACVG,KAAK,MACLC,KAAK,OACLC,YAAY,mBAEhB,wBAAQL,UAAU,SAAlB,+B,eCwGTkE,MA3If,WACI,IAAMZ,EAASO,qBAAWJ,GACnBU,EAAYC,cAAZD,SACDE,EAAsB,UAAbF,EACf,EAAwCxF,mBAAS,CAAC,CAACwB,KAAM,OAAQmE,OAAQ,QAAzE,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAA4B7F,wBAAS8F,GAArC,mBAAOH,EAAP,KAAeI,EAAf,KACA,EAAwB/F,wBAAS8F,GAAjC,mBAAOE,EAAP,KAAaC,EAAb,KACA,EAA8BjG,mBAAS,IAAvC,mBAAOkG,EAAP,KAAgBC,EAAhB,KACA,EAAwBnG,oBAAS,GAAjC,mBAAOoG,EAAP,KAAaC,EAAb,KACA,EAAkCrG,oBAAS,GAA3C,mBAAOsG,EAAP,KAAkBC,EAAlB,KACA,EAAkCvG,oBAAS,GAA3C,mBAAOwG,EAAP,KAAkBC,EAAlB,KAIA,SAASC,EAASf,GACdI,EAAUJ,GACV/E,QAAQC,IAAI,kBACZ,IAAM8F,EAAW,IAAIC,IAAK,CAAEC,UAAWnB,EAAQC,OAAQA,EAAQmB,SAAS,IACxEb,EAAQU,GACRA,EAASjD,GAAG,UAAU,SAAAqD,GAClBnG,QAAQC,IAAI2E,GACZ5E,QAAQC,IAAI6E,GACTA,EACCf,EAAOW,KAAK,cAAeyB,IAE3BnG,QAAQC,IAAI,uBAEZ8D,EAAOW,KAAK,eAAgByB,OAIjBtG,SAASC,eAAe,YAC9BsG,UAAYrB,EAEzBgB,EAASjD,GAAG,UAAU,SAAAiC,GAClB/E,QAAQC,IAAI,yBACAJ,SAASC,eAAe,YAC9BsG,UAAYrB,KAGtBhB,EAAOjB,GAAG,eAAe,SAACqD,GACtBnG,QAAQC,IAAI,kBAEZgF,GADsB,SAAAD,GAAY,4BAAQA,GAAR,CAAsB,CAACpE,KAAM,QAASmE,OAAQ,WAEhF,IACGgB,EAASM,OAAOF,GAChBnG,QAAQC,IAAI,6BAEf,MAAMZ,GACFW,QAAQC,IAAIZ,OAIpB0G,EAASjD,GAAG,SAAS,WACjB+C,GAAa,MA8CrB,OA1CApD,qBAAU,WACNzC,QAAQC,IAAI,uBAAyBmF,IACjCN,GAAUM,IACVpF,QAAQC,IAAI,wCACZ8D,EAAOW,KAAK,oBAEjB,CAACU,IAGJ3C,qBAAU,WAENsB,EAAOW,KAAkB,UAAbE,EACX,qBACA,sBAEDb,EAAOjB,GAAG,eAAe,SAACqD,GACtBZ,EAAWY,GACXnG,QAAQC,IAAI,qBAAuBkG,MAIvCG,UAAUC,aAAaC,aAAa,CAChCC,OAAO,EACPC,OAAO,IAER/D,KAAKmD,GAAUa,OAAM,iBAEzB,IAgBC,sBAAKlG,UAAU,sBAAf,UACKmF,EACD,sBAAKnF,UAAU,+BAAf,UACA,oBAAIyC,MAAO,CAACY,MAAM,SAAlB,wBAGA,cAAC,IAAD,CAAM7C,GAAG,YAAYR,UAAU,gCAA/B,6BAEA,qBAAKA,UAAU,oBAAf,SACKuE,EAAazB,KAAI,SAACqD,EAAanD,GAAd,OACd,qBAAK9C,GAAIiG,EAAYhG,KAAMH,UAAU,4BAArC,SACI,uBAAOA,UAAU,2BAA2BE,GAAI,UAAU8C,EAAOoD,MAAOpD,EAAQ,EAAkBqD,UAAU,EAA5G,SACI,wBAAQC,IAAKH,EAAY7B,OAAQlE,KAAK,uBAMtD,sBAAKJ,UAAU,gBAAf,UACI,oBAAIA,UAAU,qBAAd,SACiB,KAAZ6E,EAAiB,GAAK,gBAAkBA,IAE7C,sBAAK7E,UAAU,iCAAf,UACI,qBAAKA,UAAU,iCAAf,SACI,wBAAQO,QAtCJ,WACpB+D,EAAOiC,iBAAiB,GAAGC,QAAUzB,EACrCC,GAASD,IAoCyC/E,UAAU,+BAA5C,SAA2E,cAAC,IAAD,CAAc6C,KAAM,GAAIQ,MAAO0B,EAAO,UAAU,aAE/H,qBAAK/E,UAAU,iCAAf,SACI,wBAAQO,QAhCN,WAClBoE,EAAK8B,UACLrB,GAAa,IA8BmCpF,UAAU,+BAA1C,SAAyE,cAAC,IAAD,CAAc6C,KAAM,GAAIQ,MAAM,aAE3G,qBAAKrD,UAAU,iCAAf,SACI,wBAAQO,QAvCF,WACtB+D,EAAOoC,iBAAiB,GAAGF,QAAUvB,EACrCC,GAAcD,IAqCsCjF,UAAU,+BAA9C,SAA6E,cAAC,IAAD,CAASqD,MAAO4B,EAAY,UAAY,OAAQpC,KAAM,mBC9H3J,SAAS8D,EAAT,GAAyE,IAAtCC,EAAqC,EAAhDC,UAAsBC,EAA0B,EAA1BA,cAAkBC,EAAQ,6CACtE,OACE,cAAC,IAAD,2BACMA,GADN,IAEEC,OAAQ,SAACC,GAAD,OAA6B,IAAlBH,EACf,cAACF,EAAD,eAAeK,IACf,cAAC,IAAD,CAAUzG,GAAI,CAAE0G,SAAU,SAAUC,MAAO,CAAEC,KAAMH,EAAMI,iBAKnE,SAASC,EAAT,GAAwE,IAAtCV,EAAqC,EAAhDC,UAAsBC,EAA0B,EAA1BA,cAAkBC,EAAQ,6CACrE,OACE,cAAC,IAAD,2BACMA,GADN,IAEEC,OAAQ,SAACC,GAAD,OAA6B,IAAlBH,EACf,cAACF,EAAD,eAAeK,IACf,cAAC,IAAD,CAAUzG,GAAG,kBA8CR+G,MAvCf,WAEE,MAA0C5I,oBAAS,GAAnD,mBAAOmI,EAAP,KAAsBU,EAAtB,KACA,EAA8B7I,oBAAS,GAAvC,mBAAgB8I,GAAhB,WAkBA,OAdAzF,qBAAU,WACRvE,IAAOiK,oBAAmB,SAAC5G,GACtBA,GACD0G,GAAiB,GACjBC,GAAW,KAGXD,GAAiB,GACjBC,GAAW,SAGd,IAID,cAAChE,EAAckE,SAAf,CAAwBlI,MAAO6D,EAA/B,SACA,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOsE,KAAK,aAAaC,OAAK,EAAChB,UAAWlG,IAC1C,cAAC2G,EAAD,CAAaR,cAAeA,EAAec,KAAK,SAASf,UAAWnG,IACpE,cAAC4G,EAAD,CAAaR,cAAeA,EAAec,KAAK,UAAUf,UAAWpG,IACrE,cAACkG,EAAD,CAAcG,cAAeA,EAAec,KAAK,QAAQf,UAAWhG,IACpE,cAAC8F,EAAD,CAAcG,cAAeA,EAAec,KAAK,YAAYf,UAAWzD,IACxE,cAACuD,EAAD,CAAcG,cAAeA,EAAec,KAAK,YAAYf,UAAWjD,IACxE,cAAC+C,EAAD,CAAcG,cAAeA,EAAec,KAAK,sBAAsBf,UAAW3C,YC1D3E4D,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB9F,MAAK,YAAkD,IAA/C+F,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCFdO,IAAStB,OACP,cAAC,IAAMuB,WAAP,UACE,cAAC,EAAD,MAEFnJ,SAASC,eAAe,SAM1ByI,K","file":"static/js/main.1c666ac6.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyB_t8D_XE6j1jafZXKVR3dDM97A284QJrs\",\r\n    authDomain: \"chatty--app.firebaseapp.com\",\r\n    projectId: \"chatty--app\",\r\n    storageBucket: \"chatty--app.appspot.com\",\r\n    messagingSenderId: \"617837362774\",\r\n    appId: \"1:617837362774:web:23fa55d65f5c52505345f7\",\r\n    measurementId: \"G-96T16EQFWW\"\r\n  };\r\n\r\n  firebase.initializeApp(firebaseConfig);\r\n  export const auth = firebase.auth;\r\n  export const db = firebase.database();","import React from 'react';\r\nimport { auth } from \"../services/firebase\"; \r\n\r\nexport function signup(email, password) {\r\n    return auth().createUserWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function signin(email, password) {\r\n    return auth().signInWithEmailAndPassword(email, password);\r\n}\r\n\r\nexport function signInWithGoogle() {\r\n    const provider = new auth.GoogleAuthProvider();\r\n    return auth().signInWithPopup(provider);\r\n}\r\n\r\nexport function signInWithGitHub() {\r\n    const provider = new auth.GithubAuthProvider();\r\n    return auth().signInWithPopup(provider);\r\n}\r\n\r\nexport function signOut() {\r\n    return auth().signOut();\r\n  };\r\n","import React, { useState } from 'react'\r\nimport \"./Form.css\";\r\nimport { Link } from 'react-router-dom';\r\nimport { signup, signin, signInWithGoogle, signInWithGitHub } from '../helpers/auth';\r\nimport { auth, db } from '../services/firebase';\r\n\r\n\r\n\r\nfunction Form({isSignUp}) {\r\n\r\n\r\n    const [error, setError] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n\r\n    async function googleSignIn() {\r\n        try {\r\n          await signInWithGoogle();\r\n        } catch (error) {\r\n          setError(true);\r\n          setErrorMessage(\"Google sign in failed\");\r\n        }\r\n    }\r\n    async function githubSignIn() {\r\n        try {\r\n          await signInWithGitHub();\r\n        } catch (error) {\r\n          setError(true);\r\n          setErrorMessage(\"Github sign in failed\");\r\n        }\r\n    }\r\n\r\n\r\n    async function buttonPress(e) {\r\n        e.preventDefault();\r\n        var emailInput = document.getElementById(\"email-input\");\r\n        var passwordInput = document.getElementById(\"password-input\");\r\n\r\n        console.log(\"Email: \" + emailInput.value);\r\n        console.log(\"Password: \" + passwordInput.value);\r\n\r\n        if(isSignUp === true ) {\r\n            var screenNameInput = document.getElementById(\"screen-name-input\");\r\n                setError(false);\r\n                try {\r\n                    await signup(emailInput.value, passwordInput.value);\r\n                    await db.ref(\"users\").child(auth().currentUser.uid).set(screenNameInput.value);\r\n        \r\n                } catch (error) {\r\n                    console.log(error);\r\n                    setErrorMessage(\"Sign up failed\");\r\n                }\r\n            \r\n\r\n        }\r\n        else {\r\n            try {\r\n                await signin(emailInput.value, passwordInput.value);\r\n              } catch (error) {\r\n                setError(true);\r\n                setErrorMessage(\"Login failed\");\r\n              }\r\n        }\r\n        \r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"page--container\">\r\n            <div className=\"page--wrapper\">\r\n                <div className=\"form--pane\">\r\n\r\n\r\n                    <div className=\"form--header-wrapper\">\r\n                        <h1 className=\"form--header\" >The Lounge</h1>\r\n                    </div>\r\n                    {error ? (\r\n                        <>\r\n                            <p className=\"form--error\">{errorMessage}</p>\r\n                        </>\r\n                    ) : null}\r\n                    <form className=\"form--style\" onSubmit={buttonPress}>\r\n                        <input\r\n                        id=\"email-input\"\r\n                        className='email--input-style'\r\n                        name='email'\r\n                        type='email'\r\n                        placeholder='Email'\r\n                        />\r\n                        <input\r\n                        id=\"password-input\"\r\n                        height=\"50px\"\r\n                        className={isSignUp ? 'email--input-style' : 'password--input-style'}\r\n                        name='password'\r\n                        type='password'\r\n                        placeholder='Password'\r\n                        />\r\n                        {isSignUp ? (\r\n                            <input\r\n                                id=\"screen-name-input\"\r\n                                height=\"50px\"\r\n                                className='email--input-style'\r\n                                name='name'\r\n                                type='name'\r\n                                placeholder='User Name'\r\n                            />\r\n                        ):(\r\n                            null\r\n                        )}\r\n\r\n                        <button className=\"ripple\" type='submit'>{isSignUp ? \"Sign up\" : \"Log in\"}</button>\r\n                    </form>\r\n\r\n\r\n                </div>\r\n                <div className=\"form--bottom-wrapper\"> \r\n                    <button onClick={googleSignIn} className=\"g ripple2\" >{isSignUp ? \"Sign up with Google\" : \"Log in with Google\"}</button>\r\n                    <button onClick={githubSignIn} className=\"f ripple3\" >{isSignUp ? \"Sign Up with Github\" : \"Log In with Github\"}</button>\r\n                </div>\r\n                <div className=\"form--bottom-text-wrapper\"> \r\n                    <p className=\"form--bottom-text\"> {isSignUp ? \"Already have an account?\" : \"Don't have an account?\" } </p>\r\n                    <Link className=\"form--bottom-text-link\" to={isSignUp ? \"/LogIn\" : \"/SignUp\"}> {isSignUp ? \"Log in\" : \"Sign up\" } </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Form\r\n","import React from 'react';\r\nimport Form from '../../Form';\r\n\r\n\r\nfunction SignUp() {\r\n\r\n\r\n    return (\r\n        <>          \r\n            <Form isSignUp={true} ></Form>\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default SignUp\r\n","import React from 'react'\r\nimport Form from '../../Form'\r\n\r\nfunction LogIn() {\r\n    return (\r\n        <> \r\n            <Form isSignUp={false} ></Form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LogIn\r\n","import React from 'react'\r\nimport './Home.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction Home() {\r\n    return (\r\n        <div className=\"home--container\">\r\n            <div className=\"home--wrapper\">\r\n                <div className=\"header--wrapper\">\r\n                    <h1 className=\"header--style\"> the Lounge </h1>\r\n                </div>\r\n                <div className=\"buttons--wrapper\">\r\n                    <Link to=\"/LogIn\">\r\n                        <button class=\"ripple\"> Log In </button>\r\n                    </Link>\r\n                    <Link to=\"/SignUp\">\r\n                        <button class=\"ripple\"> Sign Up </button>\r\n                    </Link>\r\n\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { auth } from \"../../../services/firebase\";\r\nimport { db } from \"../../../services/firebase\";\r\nimport { signOut } from '../../../helpers/auth';\r\nimport './Chat.css';\r\nimport { FaPaperPlane, FaSignOutAlt } from 'react-icons/fa'\r\n\r\n\r\n\r\n\r\nfunction Chat() {\r\n    /*\r\n    async function signOutHandler() {\r\n        try {\r\n            await signOut();\r\n          } catch (error) {\r\n                console.log(\"sign out failed\");\r\n          }\r\n    }\r\n    */\r\n\r\n\r\n    const [user, setUser] = useState(auth().currentUser);\r\n    const [chats, setChats] = useState([]);\r\n    const [readError, setReadError] = useState(null);\r\n    const [userName, setUserName] = useState(user.email);\r\n    const [writeError, setWriteError] = useState(null);\r\n\r\n    \r\n\r\n    const scrollBottom = () => {\r\n        let scrollBox = document.getElementById('scrollBox');\r\n        scrollBox.scrollTop = scrollBox.scrollHeight;\r\n    }\r\n   \r\n\r\n    async function handleSubmit(e){\r\n        e.preventDefault();\r\n        let content = document.getElementById(\"message-input\").value;\r\n        if(content === '') return;\r\n        setWriteError(null);\r\n        try {\r\n            await db.ref(\"chats\").push({\r\n              content: content,\r\n              timestamp: Date.now(),\r\n              sender: userName\r\n            });\r\n            document.getElementById(\"message-input\").value='';\r\n          } catch (error) {\r\n            setWriteError(error.message);\r\n          }\r\n\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        setReadError(null);\r\n        try{\r\n            \r\n            db.ref('/users/' + user.uid).once('value').then((snapshot) => {\r\n                \r\n                if(snapshot.val() != null) {\r\n                \r\n                \r\n                    setUserName(snapshot.val());\r\n                }\r\n                console.log(\"Username set to: \" + userName);\r\n\r\n\r\n\r\n                \r\n              });\r\n\r\n\r\n            db.ref(\"chats\").on(\"value\", snapshot => {\r\n                let chats = [];\r\n                snapshot.forEach((snap) => {\r\n                    chats.push(snap.val());\r\n                });\r\n                setChats([...chats]);\r\n                \r\n\r\n                setTimeout(scrollBottom, 200);\r\n        \r\n\r\n            });\r\n\r\n        }\r\n        catch(error) {\r\n            console.log(error);\r\n            setReadError(error.message);\r\n        }\r\n      }, [user.id, userName]);\r\n\r\n    return (\r\n        <div className=\"Chat--container\">\r\n            <div className=\"Chat--navbar\">\r\n                <h1 className=\"Chat--header\">the Lounge</h1>\r\n                <button onClick={signOut} style={{alignSelf:'flex-end', marginLeft: 0, marginTop: 0}} className=\"signout ripple\"> <FaSignOutAlt size={30}/></button>\r\n            </div>\r\n            <div id=\"scrollBox\" className=\"Chat--wrapper\">\r\n                {chats.map((item, index) => {\r\n                    console.log(\"Sender: \" + item.sender + \" content: \" + item.content);\r\n                    return (\r\n\r\n                        <div style={{alignSelf: item.sender === userName ? \"flex-end\" : \"flex-start\"}} className=\"Chat--message-wrapper\">\r\n                           \r\n                            <div style={{display: 'flex', justifyContent: item.sender === userName ?  'flex-end':'flex-start'}} >\r\n                                <p style={{marginLeft: item.sender === userName ? 0 : 7, marginRight: item.sender === userName? 7:0} } className=\"Chat--sender-name\"> {item.sender} </p>\r\n                            </div>\r\n                            <div style={{justifyContent: item.sender === userName ? 'flex-end':'flex-start'}} className=\"Chat--message-bubble\">\r\n                                <p className=\"Chat--message\" key={item.timestamp}>{item.content}</p>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n\r\n\r\n\r\n\r\n\r\n                })}\r\n            </div>\r\n            <div className=\"Chat--input-wrapper\">\r\n                <form onSubmit={handleSubmit}>\r\n                    <input\r\n                    id=\"message-input\"\r\n                    className='Chat--message-input'\r\n                    name='message'\r\n                    type='message'\r\n                    placeholder='Aa'\r\n                    />\r\n\r\n                    <button className=\"send-button ripple\" >\r\n                        <FaPaperPlane size={20} style={{marginRight:1}}/>\r\n                    </button>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import React from 'react'\r\nimport Peer from 'simple-peer'\r\nimport { useEffect } from 'react'\r\nimport \"./CallMenu.css\"\r\nimport { FaUserFriends, FaVideo } from 'react-icons/fa'\r\nimport { Link, useParams } from 'react-router-dom';\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction CallMenu() {\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"CallMenu-container\">\r\n            <div className=\"CallMenu-wrapper\">\r\n                <div className=\"CallMenu-button--wrapper\">\r\n                    <Link to=\"/VideoCall:host\" className=\"CallMenu-button\"> <FaVideo color=\"white\" size={70}/> </Link>\r\n                    <label className=\"CallMenu-button--label\">Host a call</label>\r\n                </div>\r\n                <div className=\"CallMenu-button--wrapper\">\r\n                    <Link to=\"/JoinCall\" className=\"CallMenu-button\"> <FaUserFriends color=\"white\" size={70}/> </Link>\r\n                    <label className=\"CallMenu-button--label\">Join a call</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CallMenu\r\n","import socketio from \"socket.io-client\";\r\nimport React from 'react';\r\n\r\nexport const socket = socketio.connect(\"https://161.35.53.205:5000\");\r\nexport const SocketContext = React.createContext();","import React, { useState, useContext, useEffect } from 'react'\r\nimport { Redirect } from 'react-router-dom';\r\nimport \"./JoinCall.css\"\r\nimport {SocketContext} from '../../../context/socket';\r\n\r\nfunction JoinCall() {\r\n    const socket = useContext(SocketContext);\r\n    let onFormSubmit = (e) => {\r\n        e.preventDefault();\r\n        let inputEl = document.getElementById(\"key-input\");\r\n        socket.emit(\"sessKey-submit\", inputEl.value);\r\n        inputEl.value = \"\";\r\n        \r\n    }\r\n    const [sessFound, setSessFound] = useState(false);\r\n\r\n    useEffect(() => {\r\n        socket.on(\"no-matching-sess\", () => {\r\n            console.log(\"No matching session found\");\r\n        });\r\n        socket.on(\"matching-sess\", () => {\r\n            setSessFound(true);\r\n        });\r\n    }, []);\r\n\r\n    if(sessFound) {\r\n        console.log(\"in sessFound, redirecting to VideoCall:guest\");\r\n        return <Redirect to='/VideoCall:guest'/>;\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className=\"JoinCall-container\">\r\n            <div className=\"JoinCall-wrapper\">\r\n                <div className=\"JoinCall-form--wrapper\">\r\n                <h1 className=\"JoinCall-header\"> Got a call key?</h1>\r\n\r\n                    <form className=\"JoinCall-form\" onSubmit={onFormSubmit}>\r\n                        <input\r\n                            id=\"key-input\"\r\n                            className='JoinCall-input'\r\n                            name='key'\r\n                            type='text'\r\n                            placeholder='Enter key Here'\r\n                        />\r\n                        <button className=\"ripple\" > Join </button>\r\n                    </form>\r\n                </div>\r\n            \r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default JoinCall\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport \"./VideoCall.css\"\r\nimport { FaMicrophone, FaVideo, FaPhoneSlash } from 'react-icons/fa'\r\nimport Peer from 'simple-peer'\r\nimport {SocketContext} from '../../../context/socket';\r\nimport { Link, useParams } from 'react-router-dom';\r\n\r\n\r\n\r\n\r\nfunction VideoCall() {\r\n    const socket = useContext(SocketContext);\r\n    const {PeerType} = useParams();\r\n    const isHost = PeerType === \":host\" ? true : false;\r\n    const [participants, setParticipants] = useState([{name: \"host\", stream: null}]);\r\n    const [stream, setStream] = useState(undefined);\r\n    const [peer, setPeer] = useState(undefined);\r\n    const [sessKey, setSessKey] = useState(\"\");\r\n    const [mute, setMute] = useState(false);\r\n    const [cameraOff, setCameraOff] = useState(false);\r\n    const [callEnded, setCallEnded] = useState(false);\r\n    \r\n\r\n    // Called when the user grants media access\r\n    function gotMedia(stream) {\r\n        setStream(stream);\r\n        console.log(\"in got media()\");\r\n        const thisPeer = new Peer({ initiator: isHost, stream: stream, trickle: false });\r\n        setPeer(thisPeer);\r\n        thisPeer.on('signal', data => {\r\n            console.log(PeerType);\r\n            console.log(isHost);\r\n            if(isHost) { \r\n                socket.emit(\"host-signal\", data);\r\n            } else {\r\n                console.log(\"firing geust-signal\");\r\n                \r\n                socket.emit(\"guest-signal\", data); \r\n            }\r\n\r\n        });\r\n        var videoElement = document.getElementById(\"stream:0\");\r\n        videoElement.srcObject = stream;\r\n\r\n        thisPeer.on('stream', stream => {\r\n            console.log(\"adding foreign stream\");\r\n            var vidEl = document.getElementById('stream:1');\r\n            vidEl.srcObject = stream;\r\n\r\n        });\r\n        socket.on(\"signal-data\", (data) => {\r\n            console.log(\"in signal-data\");\r\n            var newParticipants = participants => [...participants, {name: \"guest\", stream: null}];\r\n            setParticipants(newParticipants);\r\n            try {\r\n               thisPeer.signal(data);\r\n               console.log(\"accepted the peers signal\");\r\n            }\r\n            catch(error) {\r\n                console.log(error);\r\n            }\r\n\r\n        });\r\n        thisPeer.on('close' ,() => {\r\n            setCallEnded(true);\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(\"In useeffect, peer: \" + peer);\r\n        if(!isHost && peer) { \r\n            console.log(\"In useEffect, emitting get-host-data\");\r\n            socket.emit(\"get-host-data\");\r\n        }\r\n    }, [peer]);\r\n\r\n    \r\n    useEffect(() => {\r\n        \r\n        socket.emit(PeerType === \":host\" ? \r\n         \"hosting-video-call\" :\r\n         \"joining-video-call\");\r\n\r\n        socket.on(\"session-key\", (data) => {\r\n            setSessKey(data);\r\n            console.log(\"received sessKey: \" + data);\r\n        });\r\n       \r\n\r\n        navigator.mediaDevices.getUserMedia({\r\n            video: true,\r\n            audio: true\r\n            \r\n        }).then(gotMedia).catch(() => {});\r\n\r\n    }, []);\r\n\r\n    const handleMuteClick = () => {\r\n        stream.getAudioTracks()[0].enabled = mute;\r\n        setMute(!mute);\r\n    }\r\n\r\n    const handleCameraClick = () => {\r\n        stream.getVideoTracks()[0].enabled = cameraOff;\r\n        setCameraOff(!cameraOff);\r\n    }\r\n    const handleEndCall = () => {\r\n        peer.destroy();\r\n        setCallEnded(true);\r\n    };\r\n    return (\r\n        <div className=\"VideoCall-container\">\r\n            {callEnded ? \r\n            <div className=\"VideoCall-callEnded--wrapper\">\r\n            <h1 style={{color:'white'}}>\r\n                Call ended\r\n            </h1>\r\n            <Link to=\"/CallMenu\" className=\"VideoCall-back--button ripple\">Back to Menu</Link>\r\n            </div>: \r\n            <div className=\"VideoCall-wrapper\">\r\n                {participants.map((participant, index) => (\r\n                    <div id={participant.name} className=\"VideoCall-stream--wrapper\">\r\n                        <video className=\"VideoCall-stream--player\" id={\"stream:\"+index} muted={index < 1 ? true : false} autoPlay={true}>\r\n                            <source src={participant.stream} type='video/mp4' />\r\n                        </video>\r\n                    </div>\r\n                ))}\r\n            </div>}\r\n\r\n            <div className=\"VideoCall-bar\">\r\n                <h3 className=\"VideoCall-bar--key\">\r\n                    {sessKey === \"\" ? \"\" : \"Session Key: \" + sessKey}\r\n                </h3>\r\n                <div className=\"VideoCall-bar--buttons-wrapper\">\r\n                    <div className=\"VideoCall-bar--button--wrapper\">\r\n                        <button onClick={handleMuteClick} className=\"VideoCall-bar--button ripple\"><FaMicrophone size={30} color={mute ? \"#242424\":\"#fff\"}/></button>\r\n                    </div>\r\n                    <div className=\"VideoCall-bar--button--wrapper\">\r\n                        <button onClick={handleEndCall} className=\"VideoCall-bar--button ripple\"><FaPhoneSlash size={30} color=\"#fff\"/></button>\r\n                    </div>\r\n                    <div className=\"VideoCall-bar--button--wrapper\">\r\n                        <button onClick={handleCameraClick} className=\"VideoCall-bar--button ripple\"><FaVideo color={cameraOff ? \"#242424\" : \"#fff\"} size={30}/></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VideoCall\r\n","import './App.css';\r\nimport { BrowserRouter as Router, Switch, Route, Redirect } \r\nfrom 'react-router-dom';\r\nimport SignUp from './components/pages/SignUpPage/SignUp';\r\nimport LogIn from './components/pages/LoginPage/LogIn';\r\nimport Home from './components/pages/HomePage/Home';\r\nimport Chat from './components/pages/ChatPage/Chat';\r\nimport CallMenu from './components/pages/CallMenuPage/CallMenu';\r\nimport JoinCall from './components/pages/JoinCallPage/JoinCall';\r\nimport VideoCall from './components/pages/VideoCallPage/VideoCall';\r\nimport { auth } from './services/firebase';\r\nimport {useEffect, useState} from 'react';\r\nimport {SocketContext, socket} from './context/socket';\r\n\r\n\r\nfunction PrivateRoute({ component: Component, authenticated, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => authenticated === true\r\n        ? <Component {...props} />\r\n        : <Redirect to={{ pathname: '/LogIn', state: { from: props.location } }} />}\r\n    />\r\n  )\r\n}\r\n\r\nfunction PublicRoute({ component: Component, authenticated, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => authenticated === false\r\n        ? <Component {...props} />\r\n        : <Redirect to='/CallMenu' />}\r\n    />\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    auth().onAuthStateChanged((user) => {\r\n      if(user) {\r\n        setAuthenticated(true);\r\n        setLoading(false);\r\n      }\r\n      else {\r\n        setAuthenticated(false);\r\n        setLoading(true);\r\n      }\r\n    })\r\n  }, []);\r\n\r\n  \r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n    <Router>\r\n      <Switch>\r\n        <Route path='/chat-app/' exact component={Home} />\r\n        <PublicRoute authenticated={authenticated} path='/LogIn' component={LogIn} />\r\n        <PublicRoute authenticated={authenticated} path='/SignUp' component={SignUp} />\r\n        <PrivateRoute authenticated={authenticated} path='/Chat' component={Chat} />\r\n        <PrivateRoute authenticated={authenticated} path='/CallMenu' component={CallMenu} />\r\n        <PrivateRoute authenticated={authenticated} path=\"/JoinCall\" component={JoinCall} />\r\n        <PrivateRoute authenticated={authenticated} path=\"/VideoCall:PeerType\" component={VideoCall} />\r\n\r\n      </Switch>\r\n    </Router>\r\n    </SocketContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}